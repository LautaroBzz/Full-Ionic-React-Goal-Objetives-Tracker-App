{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Quadion\\\\Desktop\\\\Milanesas\\\\IONIC\\\\SECOND IONIC-REACT APP\\\\myApp\\\\src\\\\Paginas\\\\Objetivos.tsx\";\nimport React, { useState, useRef, useContext } from 'react';\nimport { IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonButtons, IonBackButton, IonList, IonItem, IonLabel, IonItemSliding, IonItemOptions, IonItemOption, IonIcon, IonButton, IonFab, IonFabButton, isPlatform, IonAlert } from '@ionic/react';\nimport { useParams } from \"react-router-dom\"; // Importo iconos:\n\nimport { addOutline, create, trash } from 'ionicons/icons'; // Importo Componentes:\n\nimport EdicionModal from \"../Componentes/EdicionModal\"; // Importo Contexto\n\nimport CursosContexto from '../Datos/CursosContexto';\n\nconst Objetivos = () => {\n  const [incioBorrar, setInicioBorrar] = useState(false);\n  const [editando, setEditando] = useState(false);\n  const [objetivoSeleccionado, setObjetivoSeleccionado] = useState(null);\n  const cursosCtx = useContext(CursosContexto);\n  const opcionesDeslizamientoRef = useRef(null);\n  const objetivoSeleccionadoIdRef = useRef(null);\n  const idCursoSeleccionado = useParams().idcurso;\n  const cursoSeleccionado = cursosCtx.cursos.find(curso => curso.id === idCursoSeleccionado);\n\n  const inicioBorrarItemObjetivo = objetivoId => {\n    setInicioBorrar(true);\n    objetivoSeleccionadoIdRef.current = objetivoId;\n    setEditando(false);\n  };\n\n  const borradoDefinitivo = () => {\n    setInicioBorrar(false);\n    cursosCtx.borrarObjetivo(idCursoSeleccionado, objetivoSeleccionadoIdRef.current);\n    setEditando(false);\n  };\n\n  const inicioEdicionItemObjetivo = (objetivoId, evento) => {\n    var _opcionesDeslizamient;\n\n    evento.stopPropagation();\n    const objetivo = cursoSeleccionado === null || cursoSeleccionado === void 0 ? void 0 : cursoSeleccionado.objetivos.find(o => o.id === objetivoId);\n    (_opcionesDeslizamient = opcionesDeslizamientoRef.current) === null || _opcionesDeslizamient === void 0 ? void 0 : _opcionesDeslizamient.closeOpened();\n\n    if (!objetivo) {\n      return;\n    }\n\n    ;\n    setEditando(true);\n    setObjetivoSeleccionado(objetivo);\n  };\n\n  const cancelarEdicion = () => {\n    setEditando(false);\n    setObjetivoSeleccionado(null);\n  };\n\n  const inicioAñadirObjetivo = () => {\n    setEditando(true);\n    setObjetivoSeleccionado(null);\n  };\n\n  const guardarObjetivo = texto => {\n    if (objetivoSeleccionado) {\n      cursosCtx.actualizarObjetivo(idCursoSeleccionado, objetivoSeleccionado.id, texto);\n    } else {\n      cursosCtx.añadirObjetivo(idCursoSeleccionado, texto);\n    }\n\n    ;\n    setEditando(false);\n  };\n\n  let contenido = /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 19\n    }\n  }, \"No hay objetivos ingresados\");\n\n  if (!cursoSeleccionado) {\n    contenido = /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"ion-text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, \"No hay cursos\");\n  }\n\n  ;\n\n  if (cursoSeleccionado && cursoSeleccionado.objetivos.length > 0) {\n    contenido = /*#__PURE__*/React.createElement(IonList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, cursoSeleccionado.objetivos.map(objetivo => /*#__PURE__*/React.createElement(IonItemSliding, {\n      key: objetivo.id,\n      ref: opcionesDeslizamientoRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IonItemOptions, {\n      side: \"start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IonItemOption, {\n      onClick: inicioBorrarItemObjetivo.bind(null, objetivo.id),\n      color: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      slot: \"icon-only\",\n      icon: trash,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(IonItem, {\n      lines: \"full\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IonLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, objetivo.texto)), /*#__PURE__*/React.createElement(IonItemOptions, {\n      side: \"end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IonItemOption, {\n      onClick: inicioEdicionItemObjetivo.bind(null, objetivo.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      slot: \"icon-only\",\n      icon: create,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }))))));\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EdicionModal, {\n    mostrar: editando,\n    cancelar: cancelarEdicion,\n    objetivoEditado: objetivoSeleccionado,\n    guardar: guardarObjetivo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(IonAlert, {\n    isOpen: incioBorrar,\n    header: \"Estas seguro de borrar?\",\n    message: \"Esta accion es irreversible\",\n    buttons: [{\n      text: 'No',\n      role: 'cancel',\n      handler: () => {\n        setInicioBorrar(false);\n      }\n    }, {\n      text: 'Si',\n      handler: borradoDefinitivo\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonToolbar, {\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonButtons, {\n    slot: \"start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonBackButton, {\n    defaultHref: \"/cursos/lista\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(IonTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, cursoSeleccionado ? cursoSeleccionado.titulo : 'No existe el curso'), !isPlatform('android') && /*#__PURE__*/React.createElement(IonButtons, {\n    slot: \"end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IonButton, {\n    onClick: inicioAñadirObjetivo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    slot: \"icon-only\",\n    icon: addOutline,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }))))), /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, contenido, isPlatform('android') && /*#__PURE__*/React.createElement(IonFab, {\n    horizontal: \"end\",\n    vertical: \"bottom\",\n    slot: \"fixed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonFabButton, {\n    color: \"secondary\",\n    onClick: inicioAñadirObjetivo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: addOutline,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }))))));\n};\n\nexport default Objetivos;","map":{"version":3,"sources":["C:/Users/Quadion/Desktop/Milanesas/IONIC/SECOND IONIC-REACT APP/myApp/src/Paginas/Objetivos.tsx"],"names":["React","useState","useRef","useContext","IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonButtons","IonBackButton","IonList","IonItem","IonLabel","IonItemSliding","IonItemOptions","IonItemOption","IonIcon","IonButton","IonFab","IonFabButton","isPlatform","IonAlert","useParams","addOutline","create","trash","EdicionModal","CursosContexto","Objetivos","incioBorrar","setInicioBorrar","editando","setEditando","objetivoSeleccionado","setObjetivoSeleccionado","cursosCtx","opcionesDeslizamientoRef","objetivoSeleccionadoIdRef","idCursoSeleccionado","idcurso","cursoSeleccionado","cursos","find","curso","id","inicioBorrarItemObjetivo","objetivoId","current","borradoDefinitivo","borrarObjetivo","inicioEdicionItemObjetivo","evento","stopPropagation","objetivo","objetivos","o","closeOpened","cancelarEdicion","inicioAñadirObjetivo","guardarObjetivo","texto","actualizarObjetivo","añadirObjetivo","contenido","length","map","bind","text","role","handler","titulo"],"mappings":";AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,UAAlC,QAAoD,OAApD;AACA,SACEC,UADF,EAEEC,SAFF,EAGEC,OAHF,EAIEC,QAJF,EAKEC,UALF,EAMEC,UANF,EAOEC,aAPF,EAQEC,OARF,EASEC,OATF,EAUEC,QAVF,EAWEC,cAXF,EAYEC,cAZF,EAaEC,aAbF,EAcEC,OAdF,EAeEC,SAfF,EAgBEC,MAhBF,EAiBEC,YAjBF,EAkBEC,UAlBF,EAmBEC,QAnBF,QAoBO,cApBP;AAqBA,SAASC,SAAT,QAA0B,kBAA1B,C,CACA;;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,KAA7B,QAA0C,gBAA1C,C,CACA;;AACA,OAAOC,YAAP,MAAyB,6BAAzB,C,CACA;;AACA,OAAOC,cAAP,MAA2B,yBAA3B;;AAEA,MAAMC,SAAmB,GAAG,MAAM;AAChC,QAAM,CAACC,WAAD,EAAcC,eAAd,IAAiC9B,QAAQ,CAAC,KAAD,CAA/C;AACA,QAAM,CAAC+B,QAAD,EAAWC,WAAX,IAA0BhC,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAACiC,oBAAD,EAAuBC,uBAAvB,IAAkDlC,QAAQ,CAAM,IAAN,CAAhE;AACA,QAAMmC,SAAS,GAAEjC,UAAU,CAACyB,cAAD,CAA3B;AACA,QAAMS,wBAAwB,GAAGnC,MAAM,CAA8B,IAA9B,CAAvC;AACA,QAAMoC,yBAAyB,GAAGpC,MAAM,CAAkB,IAAlB,CAAxC;AACA,QAAMqC,mBAAmB,GAAGhB,SAAS,GAAwBiB,OAA7D;AACA,QAAMC,iBAAiB,GAAGL,SAAS,CAACM,MAAV,CAAiBC,IAAjB,CAAsBC,KAAK,IAAIA,KAAK,CAACC,EAAN,KAAaN,mBAA5C,CAA1B;;AAEA,QAAMO,wBAAwB,GAAIC,UAAD,IAAwB;AACvDhB,IAAAA,eAAe,CAAC,IAAD,CAAf;AACAO,IAAAA,yBAAyB,CAACU,OAA1B,GAAoCD,UAApC;AACAd,IAAAA,WAAW,CAAC,KAAD,CAAX;AACD,GAJD;;AAMA,QAAMgB,iBAAiB,GAAG,MAAM;AAC9BlB,IAAAA,eAAe,CAAC,KAAD,CAAf;AACAK,IAAAA,SAAS,CAACc,cAAV,CAAyBX,mBAAzB,EAA8CD,yBAAyB,CAACU,OAAxE;AACAf,IAAAA,WAAW,CAAC,KAAD,CAAX;AACD,GAJD;;AAMA,QAAMkB,yBAAyB,GAAG,CAACJ,UAAD,EAAqBK,MAArB,KAAkD;AAAA;;AAClFA,IAAAA,MAAM,CAACC,eAAP;AACA,UAAMC,QAAQ,GAAGb,iBAAH,aAAGA,iBAAH,uBAAGA,iBAAiB,CAAEc,SAAnB,CAA6BZ,IAA7B,CAAkCa,CAAC,IAAIA,CAAC,CAACX,EAAF,KAASE,UAAhD,CAAjB;AACA,6BAAAV,wBAAwB,CAACW,OAAzB,gFAAkCS,WAAlC;;AACA,QAAG,CAACH,QAAJ,EAAc;AACZ;AACD;;AAAA;AACDrB,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,IAAAA,uBAAuB,CAACmB,QAAD,CAAvB;AACD,GATD;;AAWA,QAAMI,eAAe,GAAG,MAAM;AAC5BzB,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAE,IAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACD,GAHD;;AAKA,QAAMwB,oBAAoB,GAAG,MAAM;AACjC1B,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,IAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACD,GAHD;;AAKA,QAAMyB,eAAe,GAAIC,KAAD,IAAmB;AACzC,QAAG3B,oBAAH,EAAyB;AACvBE,MAAAA,SAAS,CAAC0B,kBAAV,CAA6BvB,mBAA7B,EAAkDL,oBAAoB,CAACW,EAAvE,EAA2EgB,KAA3E;AACD,KAFD,MAEO;AACLzB,MAAAA,SAAS,CAAC2B,cAAV,CAAyBxB,mBAAzB,EAA8CsB,KAA9C;AACD;;AAAA;AACD5B,IAAAA,WAAW,CAAC,KAAD,CAAX;AACD,GAPD;;AASA,MAAI+B,SAAS,gBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAhB;;AAEA,MAAG,CAACvB,iBAAJ,EAAuB;AACrBuB,IAAAA,SAAS,gBAAG;AAAI,MAAA,SAAS,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAZ;AACD;;AAAA;;AAED,MAAGvB,iBAAiB,IAAIA,iBAAiB,CAACc,SAAlB,CAA4BU,MAA5B,GAAqC,CAA7D,EAAgE;AAC9DD,IAAAA,SAAS,gBACP,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGvB,iBAAiB,CAACc,SAAlB,CAA4BW,GAA5B,CAAiCZ,QAAD,iBAC/B,oBAAC,cAAD;AAAgB,MAAA,GAAG,EAAEA,QAAQ,CAACT,EAA9B;AAAkC,MAAA,GAAG,EAAER,wBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AAAgB,MAAA,IAAI,EAAC,OAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,aAAD;AACE,MAAA,OAAO,EAAES,wBAAwB,CAACqB,IAAzB,CACP,IADO,EAEPb,QAAQ,CAACT,EAFF,CADX;AAKE,MAAA,KAAK,EAAC,QALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAOA,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC,WAAd;AAA0B,MAAA,IAAI,EAAEnB,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPA,CADF,CADF,eAYE,oBAAC,OAAD;AAAS,MAAA,KAAK,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAW4B,QAAQ,CAACO,KAApB,CADF,CAZF,eAeE,oBAAC,cAAD;AAAgB,MAAA,IAAI,EAAC,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,aAAD;AACE,MAAA,OAAO,EAAEV,yBAAyB,CAACgB,IAA1B,CACP,IADO,EAEPb,QAAQ,CAACT,EAFF,CADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAMA,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAC,WAAd;AAA0B,MAAA,IAAI,EAAEpB,MAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANA,CADF,CAfF,CADD,CADH,CADF;AAgCD;;AAAA;AAED,sBACE,uDACE,oBAAC,YAAD;AACE,IAAA,OAAO,EAAEO,QADX;AAEE,IAAA,QAAQ,EAAE0B,eAFZ;AAGE,IAAA,eAAe,EAAExB,oBAHnB;AAIE,IAAA,OAAO,EAAE0B,eAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAQE,oBAAC,QAAD;AACE,IAAA,MAAM,EAAE9B,WADV;AAEE,IAAA,MAAM,EAAC,yBAFT;AAGE,IAAA,OAAO,EAAC,6BAHV;AAIE,IAAA,OAAO,EAAE,CACP;AACEsC,MAAAA,IAAI,EAAE,IADR;AAEEC,MAAAA,IAAI,EAAE,QAFR;AAGEC,MAAAA,OAAO,EAAE,MAAM;AACbvC,QAAAA,eAAe,CAAC,KAAD,CAAf;AACD;AALH,KADO,EAQP;AAAEqC,MAAAA,IAAI,EAAE,IAAR;AAAcE,MAAAA,OAAO,EAAErB;AAAvB,KARO,CAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eAuBE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAC,SAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AAAe,IAAA,WAAW,EAAC,eAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAIE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,iBAAiB,GACdA,iBAAiB,CAAC8B,MADJ,GAEd,oBAHN,CAJF,EASG,CAAClD,UAAU,CAAC,SAAD,CAAX,iBACC,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAC,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,OAAO,EAAEsC,oBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAC,WAAd;AAA0B,IAAA,IAAI,EAAEnC,UAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAVJ,CADF,CADF,eAoBE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGwC,SADH,EAEG3C,UAAU,CAAC,SAAD,CAAV,iBACC,oBAAC,MAAD;AAAQ,IAAA,UAAU,EAAC,KAAnB;AAAyB,IAAA,QAAQ,EAAC,QAAlC;AAA2C,IAAA,IAAI,EAAC,OAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAC,WAApB;AAAgC,IAAA,OAAO,EAAEsC,oBAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAEnC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAHJ,CApBF,CAvBF,CADF;AAyDD,CAtJD;;AAwJA,eAAeK,SAAf","sourcesContent":["\r\nimport React, { useState, useRef, useContext } from 'react';\r\nimport {\r\n  IonContent,\r\n  IonHeader,\r\n  IonPage,\r\n  IonTitle,\r\n  IonToolbar,\r\n  IonButtons,\r\n  IonBackButton,\r\n  IonList,\r\n  IonItem,\r\n  IonLabel,\r\n  IonItemSliding,\r\n  IonItemOptions,\r\n  IonItemOption,\r\n  IonIcon,\r\n  IonButton,\r\n  IonFab,\r\n  IonFabButton,\r\n  isPlatform,\r\n  IonAlert,\r\n} from '@ionic/react';\r\nimport { useParams } from \"react-router-dom\"; \r\n// Importo iconos:\r\nimport { addOutline, create, trash } from 'ionicons/icons';\r\n// Importo Componentes:\r\nimport EdicionModal from \"../Componentes/EdicionModal\";\r\n// Importo Contexto\r\nimport CursosContexto from '../Datos/CursosContexto';\r\n\r\nconst Objetivos: React.FC = () => {\r\n  const [incioBorrar, setInicioBorrar] = useState(false);\r\n  const [editando, setEditando] = useState(false);\r\n  const [objetivoSeleccionado, setObjetivoSeleccionado] = useState<any>(null);\r\n  const cursosCtx= useContext(CursosContexto);\r\n  const opcionesDeslizamientoRef = useRef< HTMLIonItemSlidingElement >(null);\r\n  const objetivoSeleccionadoIdRef = useRef< string | null >(null);\r\n  const idCursoSeleccionado = useParams<{ idcurso: string }>().idcurso;\r\n  const cursoSeleccionado = cursosCtx.cursos.find(curso => curso.id === idCursoSeleccionado);\r\n\r\n  const inicioBorrarItemObjetivo = (objetivoId: string) => {\r\n    setInicioBorrar(true);\r\n    objetivoSeleccionadoIdRef.current = objetivoId;\r\n    setEditando(false);\r\n  };\r\n\r\n  const borradoDefinitivo = () => {\r\n    setInicioBorrar(false);\r\n    cursosCtx.borrarObjetivo(idCursoSeleccionado, objetivoSeleccionadoIdRef.current!);\r\n    setEditando(false);\r\n  };\r\n\r\n  const inicioEdicionItemObjetivo = (objetivoId: string, evento: React.MouseEvent) => {\r\n    evento.stopPropagation();\r\n    const objetivo = cursoSeleccionado?.objetivos.find(o => o.id === objetivoId);\r\n    opcionesDeslizamientoRef.current?.closeOpened()\r\n    if(!objetivo) {\r\n      return;\r\n    };\r\n    setEditando(true);\r\n    setObjetivoSeleccionado(objetivo);\r\n  };\r\n\r\n  const cancelarEdicion = () => {\r\n    setEditando(false);\r\n    setObjetivoSeleccionado(null);\r\n  };\r\n\r\n  const inicioAñadirObjetivo = () => {\r\n    setEditando(true);\r\n    setObjetivoSeleccionado(null);\r\n  };\r\n\r\n  const guardarObjetivo = (texto: string) => {\r\n    if(objetivoSeleccionado) {\r\n      cursosCtx.actualizarObjetivo(idCursoSeleccionado, objetivoSeleccionado.id, texto)\r\n    } else {\r\n      cursosCtx.añadirObjetivo(idCursoSeleccionado, texto);\r\n    };\r\n    setEditando(false);\r\n  };\r\n\r\n  let contenido = <h2>No hay objetivos ingresados</h2>;\r\n\r\n  if(!cursoSeleccionado) {\r\n    contenido = <h2 className=\"ion-text-center\">No hay cursos</h2>\r\n  };\r\n\r\n  if(cursoSeleccionado && cursoSeleccionado.objetivos.length > 0) {\r\n    contenido = (\r\n      <IonList>\r\n        {cursoSeleccionado.objetivos.map((objetivo) => (\r\n          <IonItemSliding key={objetivo.id} ref={opcionesDeslizamientoRef}>\r\n            <IonItemOptions side='start'>\r\n              <IonItemOption\r\n                onClick={inicioBorrarItemObjetivo.bind(\r\n                  null,\r\n                  objetivo.id\r\n                )}\r\n                color='danger'\r\n              >\r\n              <IonIcon slot='icon-only' icon={trash} />\r\n              </IonItemOption>\r\n            </IonItemOptions>\r\n            <IonItem lines='full'>\r\n              <IonLabel>{objetivo.texto}</IonLabel>\r\n            </IonItem>\r\n            <IonItemOptions side='end'>\r\n              <IonItemOption\r\n                onClick={inicioEdicionItemObjetivo.bind(\r\n                  null,\r\n                  objetivo.id\r\n                )}\r\n              >\r\n              <IonIcon slot='icon-only' icon={create} />\r\n                </IonItemOption>\r\n            </IonItemOptions>\r\n          </IonItemSliding>\r\n        ))}\r\n      </IonList>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <EdicionModal\r\n        mostrar={editando}\r\n        cancelar={cancelarEdicion}\r\n        objetivoEditado={objetivoSeleccionado}\r\n        guardar={guardarObjetivo}\r\n      />\r\n\r\n      <IonAlert\r\n        isOpen={incioBorrar}\r\n        header='Estas seguro de borrar?'\r\n        message='Esta accion es irreversible'\r\n        buttons={[\r\n          {\r\n            text: 'No',\r\n            role: 'cancel',\r\n            handler: () => {\r\n              setInicioBorrar(false)\r\n            },\r\n          },\r\n          { text: 'Si', handler: borradoDefinitivo },\r\n        ]}\r\n      />\r\n      <IonPage>\r\n        <IonHeader>\r\n          <IonToolbar color='primary'>\r\n            <IonButtons slot='start'>\r\n              <IonBackButton defaultHref='/cursos/lista' />\r\n            </IonButtons>\r\n            <IonTitle>\r\n              {cursoSeleccionado\r\n                ? cursoSeleccionado.titulo\r\n                : 'No existe el curso'}\r\n            </IonTitle>\r\n            {!isPlatform('android') && (\r\n              <IonButtons slot='end'>\r\n                <IonButton onClick={inicioAñadirObjetivo}>\r\n                  <IonIcon slot='icon-only' icon={addOutline} />\r\n                </IonButton>\r\n              </IonButtons>\r\n            )}\r\n          </IonToolbar>\r\n        </IonHeader>\r\n        <IonContent>\r\n          {contenido}\r\n          {isPlatform('android') && (\r\n            <IonFab horizontal='end' vertical='bottom' slot='fixed'>\r\n              <IonFabButton color='secondary' onClick={inicioAñadirObjetivo}>\r\n                <IonIcon icon={addOutline} />\r\n              </IonFabButton>\r\n            </IonFab>\r\n          )}\r\n        </IonContent>\r\n      </IonPage>\r\n    </>\r\n  )\r\n};\r\n\r\nexport default Objetivos;\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}